/*
 * for the abstract content
 * change it in experiments.js
 */

var abstract=new Array(48);

abstract[0]="The objective of this work was to examine human response to motion-level robot adaptation to determine its effect on team fluency, human satisfaction, and perceived safety and comfort.Background: The evaluation of human response to adaptive robotic assistants has been limited, particularly in the realm of motion-level adaptation. The lack of true human-in-the-loop evaluation has made it impossible to determine whether such adaptation would lead to efficient and satisfying human–robot interaction.Method: We conducted an experiment in which participants worked with a robot to perform a collaborative task. Participants worked with an adaptive robot incorporating human-aware motion planning and with a baseline robot using shortest-path motions. Team fluency was evaluated through a set of quantitative metrics.";

abstract[1]="The purpose of this study was to develop a lexicon for 3-D hand gestures for common human-computer interaction (HCI) tasks by considering usability and effort ratings. Recent technologies create an opportunity for developing a free-form 3-D hand gesture lexicon for HCI. Subjects (N = 30) with prior experience using 2-D gestures on touch screens performed 3-D gestures of their choice for 34 common HCI tasks and rated their gestures on preference, match, ease, and effort. Videos of the 1,300 generated gestures were analyzed for gesture popularity, order, and response times. Gesture hand postures were rated by the authors on biomechanical risk and fatigue. A final task gesture set is proposed based primarily on subjective ratings and hand posture risk. The different dimensions used for evaluating task gestures were not highly correlated.";

abstract[2]="Our goal was to evaluate the degree to which display technologies influence the perception of size in an image. Research suggests that factors such as whether an image is displayed stereoscopically, whether a user's viewpoint is tracked, and the field of view of a given display can affect users' perception of scale in the displayed image. Participants directly estimated the size of a gap by matching the distance between their hands to the gap width and judged their ability to pass unimpeded through the gap in one of five common implementations of three display technologies (two head-mounted displays [HMD] and a back-projection screen). Both measures of gap width were similar for the two HMD conditions and the back projection with stereo and tracking. For the displays without tracking, stereo and monocular conditions differed from each other, with monocular viewing showing underestimation of size.";

abstract[3]="The main purpose of this study was to investigate the effects and interactions of line length, line number, and line spacing on Chinese screen-based proofreading performance and amount of scrolling. Background: Proofreading is an important process, and much of it is now done on screen. The Chinese language is increasingly important, but very little work has been done on the factors that affect proofreading performance for Chinese passages. Method: Three display factors related to screen size, namely line length, line number, and line spacing, were selected to be investigated in an experiment to determine their effects on proofreading performance and amount of scrolling. Correlations between proofreading performance in time and accuracy and scrolling amount were also analyzed.";

abstract[4]="We show how to choose colors for icons on maps to minimize search time using predictions of a model of visual search. BACKGROUND: The model analyzes digital images of a search target (an icon on a map) and a search display (the map containing the icon) and predicts search time as a function of target-distractor color distinctiveness and target eccentricity. METHOD: We parameterized the model using data from a visual search task and performed a series of optimization tasks to test the model's ability to choose colors for icons to minimize search time across icons. Map display designs made by this procedure were tested experimentally. For the displays without tracking, stereo and monocular conditions differed from each other, with monocular viewing showing underestimation of size. ";

abstract[5]="An experiment was conducted to investigate the impacts of length and variability of system response time (SRT) on user behavior and user experience (UX) in sequential computing tasks.Length is widely considered to be the most important aspect of SRTs in human-computer interaction. Research on temporal attention shows that humans adjust to temporal structures and that performance substantially improves with temporal predictability.Participants performed a sequential task with simulated office software. Duration and variability, that is, the number of different SRTs, was manipulated. Lower variability came at the expense of on average higher durations. User response times, task execution times, and failure rates were measured to assess user performance. UX was measured with a questionnaire.A reduction in variability improved user performance significantly. ";

abstract[6]="In this study, we aim to investigate how users’ visual performance with a small flexible display changes based on the direction (i.e., convex, concave) and the magnitude (i.e., low, high) of the display curvature. Background: Despite the wide interest in flexible display materials and deformable displays, the potential effects of nonplanar display surfaces on human perception and performance have received little attention. This study is the first to demonstrate how curving affects visual performance with an actual flexible display (4.5-in. active-matrix organic light-emitting diode). Method: In a series of three experiments, we compared the performance with a planar display to the performance with concave and convex display surfaces with low and high curvature magnitudes. ";

abstract[7]="The aim of the study was to investigate the influence of different driving scenarios (urban, rural, highway) on the timing required by drivers from a two-stage warning system, based on car-to-car communication. Car-to-car communication systems are designed to inform drivers of potential hazards at an early stage, before they are visible to them. Here, questions arise as to how drivers acknowledge early warnings and when they should be informed (first stage) and warned (second stage). Hence, optimum timing for presenting the information was tested. A psychophysical method was used to establish the optimum timing in three driving scenarios at different speed limits (urban: 50 km/h, rural: 100 km/h, highway: 130 km/h). A total of 24 participants (11 female, 13 male; M = 29.1 years, SD = 11.6 years) participated in the study. ";

abstract[8]="User performance, perceived usability, and preference for five smartphone text input methods were compared with younger and older novice adults. Smartphones are used for a variety of functions other than phone calls, including text messaging, e-mail, and web browsing. Research comparing performance with methods of text input on smartphones reveals a high degree of variability in reported measures, procedures, and results. This study reports on a direct comparison of five of the most common input methods among a population of younger and older adults, who had no experience with any of the methods. Fifty adults (25 younger, 18-35 years; 25 older, 60-84 years) completed a text entry task using five text input methods (physical Qwerty, onscreen Qwerty, tracing, handwriting, and voice). Entry and error rates, perceived usability, and preference were recorded.";

abstract[9]="Today's user is surrounded by mobile appliances that continuously disrupt activities through instant message, email and phone call notifications. In this paper, we present a system that regulates notifications by such devices dynamically on the basis of direct measures of the user's mental load. We discuss a prototype Physiologically Attentive User Interface (PAUI) that measures mental load using Heart Rate Variability (HRV) signals, and motor activity using electroencephalogram (EEG) analysis. The PAUI uses this information to distinguish between 4 attentional states of the user: at rest, moving, thinking and busy. We discuss an example PAUI application in the automated regulation of notifications in a mobile cell phone appliance.";

abstract[10]="The objective of this study was to investigate the characteristics of pedal errors by younger and older drivers that relate to sudden unintended acceleration (SUA) accidents. SUA during an accident is a serious issue that causes numerous critical injuries and deaths every year. Previous studies have indicated that the major factor in these accidents is pedal error; however, the characteristics that relate to SUA accidents in older drivers remain unclear. Twenty younger drivers (YDs; 23.1 卤 0.22 years) and 20 older drivers (ODs; 68.9 卤 1.16 years) used either one or both feet to participate in six tasks that involved pressing accelerator or brake pedals in response to various visual stimuli. Both the reaction times (RTs) and the pedal error rates of the YD and OD groups significantly increased with the difficulty of the task.";

abstract[11]="A fully immersive, high fidelity street crossing simulator was used to examine the effects of texting on pedestrian street crossing performance. Research suggests that street crossing performance is impaired when pedestrians engage in cell phone conversations. Less is known about the impact of texting on street crossing performance. Thirty-two young adults completed three distraction conditions in a simulated street crossing task: no distraction, phone conversation, and texting. A hands-free headset and a mounted tablet were used to conduct the phone and texting conversations, respectively. Participants moved through the virtual environment via a manual treadmill, allowing them to select crossing gaps and change their gait. During the phone conversation and texting conditions.";

abstract[12]="In this paper I begin looking for evidence of a subjective workload curve. BACKGROUND: Results from subjective mental workload assessments are often interpreted linearly. However, I hypothesized that ratings of subjective mental workload increase nonlinearly with unitary increases in working memory load. METHOD: Two studies were conducted. In the first, the participant provided ratings of the mental difficulty of a series of digit span recall tasks. In the second study, participants provided ratings of mental difficulty associated with recall of visual patterns. The results of the second study were then examined using a mathematical model of working memory. RESULTS: An S curve, predicted a priori, was found in the results of both the digit span and visual pattern studies. A mathematical model showed a tight fit between workload ratings.";

abstract[13]="The aim of this study was to compare the effectiveness of a new index of perceived mental workload, the Multiple Resource Questionnaire (MRQ), with the standard measure of workload used in the study of vigilance, the NASA Task Load Index (NASA-TLX). BACKGROUND: The NASA-TLX has been used extensively to demonstrate that vigilance tasks impose a high level of workload on observers. However, this instrument does not specify the information-processing resources needed for task performance. The MRQ offers a tool to measure the workload associated with vigilance assignments in which such resources can be identified. METHOD: Two experiments were performed in which factors known to influence task demand were varied. Included were the detection of stimulus presence or absence.";

abstract[14]="In this study, we examined how effectivelypeople can monitor new stimuli on a peripheral displaywhile carrying out judgments on an adjacent central display.BACKGROUND: Improved situation awareness is criticalfor improved operator performance in aviation and manyother domains. Given the limited extent of foveal processing,acquiring additional information from peripheral visionoffers high potential gains.METHOD: Participants carried out a sequence of centralperceptual judgments while simultaneously monitoringthe periphery for new stimuli. Peripheral detection wasmeasured as a function of central-judgment difficulty, therelative timing of the two tasks, and peripheral event rate.RESULTS: Participants accurately detected and locatedperipheral targets, even at the highest eccentricity exploredhere.";

abstract[15]="To test the display luminance hypothesis of the positive polarity advantage and gain insights for display design, the joint effects of display polarity and character size were assessed with a proofreading task. Background: Studies have shown that dark characters on light background (positive polarity) lead to better legibility than do light characters on dark background (negative polarity), presumably due to the typically higher display luminance of positive polarity presentations. Method: Participants performed a proofreading task with black text on white background or white text on black background. Texts were presented in four character sizes (8, 10, 12, and 14 pt; corresponding to 0.22, 0.25, 0.31, and 0.34 of vertical visual angle). Results: A positive polarity advantage was observed in proofreading performance.";

abstract[16]="The objective was to examine the relationship between cockpit automation use and task-related and task-unrelated thought among airline pilots. Studies find that cockpit automation can sometimes relieve pilots of tedious control tasks and afford them more time to think ahead. Paradoxically, automation has also been shown to lead to lesser awareness. These results prompt the question of what pilots think about while using automation. A total of 18 airline pilots flew a Boeing 747-400 simulator while the authors recorded which of two levels of automation the pilots used. As they worked, pilots were verbally probed about what they were thinking. Pilots were asked to categorize their thoughts as pertaining to (a) a specific task at hand, (b) higher-level flight-related thoughts (e.g., planning ahead), or (c) thoughts unrelated to the flight. ";

abstract[17]="A study was run to test the sensitivity of multiple workload indices to the differing cognitive demands of four military monitoring task scenarios and to investigate relationships between indices.Various psychophysiological indices of mental workload exhibit sensitivity to task factors. However, the psychometric properties of multiple indices, including the extent to which they intercorrelate, have not been adequately investigated.One hundred fifty participants performed in four task scenarios based on a simulation of unmanned ground vehicle operation. Scenarios required threat detection and/or change detection. Both single- and dual-task scenarios were used. Workload metrics for each scenario were derived from the electroencephalogram (EEG), electrocardiogram, transcranial Doppler sonography, functional near infrared, and eye tracking.";

abstract[18]="The purpose of this study was to develop a lexicon for 3-D hand gestures for common human-computer interaction (HCI) tasks by considering usability and effort ratings. Recent technologies create an opportunity for developing a free-form 3-D hand gesture lexicon for HCI. Subjects (N = 30) with prior experience using 2-D gestures on touch screens performed 3-D gestures of their choice for 34 common HCI tasks and rated their gestures on preference, match, ease, and effort. Videos of the 1,300 generated gestures were analyzed for gesture popularity, order, and response times. Gesture hand postures were rated by the authors on biomechanical risk and fatigue. A final task gesture set is proposed based primarily on subjective ratings and hand posture risk. The different dimensions used for evaluating task gestures were not highly correlated.";

abstract[19]="Our goal was to evaluate the degree to which display technologies influence the perception of size in an image. Research suggests that factors such as whether an image is displayed stereoscopically, whether a user's viewpoint is tracked, and the field of view of a given display can affect users' perception of scale in the displayed image. Participants directly estimated the size of a gap by matching the distance between their hands to the gap width and judged their ability to pass unimpeded through the gap in one of five common implementations of three display technologies (two head-mounted displays [HMD] and a back-projection screen). Both measures of gap width were similar for the two HMD conditions and the back projection with stereo and tracking. For the displays without tracking, stereo and monocular conditions.";

abstract[20]="We show how to choose colors for icons on maps to minimize search time using predictions of a model of visual search. BACKGROUND: The model analyzes digital images of a search target (an icon on a map) and a search display (the map containing the icon) and predicts search time as a function of target-distractor color distinctiveness and target eccentricity. METHOD: We parameterized the model using data from a visual search task and performed a series of optimization tasks to test the model's ability to choose colors for icons to minimize search time across icons. Map display designs made by this procedure were tested experimentally. In a follow-up experiment, we examined the model's flexibility to assign colors in novel search situations. RESULTS: The model fits human performance, performs well on the optimization tasks. ";

abstract[21]="An experiment was conducted to investigate the impacts of length and variability of system response time (SRT) on user behavior and user experience (UX) in sequential computing tasks.Length is widely considered to be the most important aspect of SRTs in human-computer interaction. Research on temporal attention shows that humans adjust to temporal structures and that performance substantially improves with temporal predictability.Participants performed a sequential task with simulated office software. Duration and variability, that is, the number of different SRTs, was manipulated. Lower variability came at the expense of on average higher durations. User response times, task execution times, and failure rates were measured to assess user performance. UX was measured with a questionnaire.";

abstract[22]="The objective of this work was to examine human response to motion-level robot adaptation to determine its effect on team fluency, human satisfaction, and perceived safety and comfort.Background: The evaluation of human response to adaptive robotic assistants has been limited, particularly in the realm of motion-level adaptation. The lack of true human-in-the-loop evaluation has made it impossible to determine whether such adaptation would lead to efficient and satisfying human–robot interaction.Method: We conducted an experiment in which participants worked with a robot to perform a collaborative task. Participants worked with an adaptive robot incorporating human-aware motion planning and with a baseline robot using shortest-path motions. Team fluency was evaluated through a set of quantitative metrics.";

abstract[23]="The main purpose of this study was to investigate the effects and interactions of line length, line number, and line spacing on Chinese screen-based proofreading performance and amount of scrolling. Background: Proofreading is an important process, and much of it is now done on screen. The Chinese language is increasingly important, but very little work has been done on the factors that affect proofreading performance for Chinese passages. Method: Three display factors related to screen size, namely line length, line number, and line spacing, were selected to be investigated in an experiment to determine their effects on proofreading performance and amount of scrolling. Correlations between proofreading performance in time and accuracy and scrolling amount were also analyzed.";



/*
 * 被试个人信息
 */
var info=new Array(3);
function get_info () 
{
	info[0]=document.getElementById("name").value;
	info[1]=document.getElementById("age").value;
    info[2]=document.getElementById("gender").value;
}

/*
 *生成实验条件：时间长度、进度条编号，仅开头引用一次编译
 */
var literature=new Array(48);
var loading_symbol=new Array(48);
var loading_symbol_name=new Array(48);
var time_length=new Array(48);
var timelist=new Array(3);//5\10\15s三者順序，timelist表示的是順序123
var giflist=new Array(16);
timelist[0]=1,timelist[1]=2,timelist[2]=3;
var file="literature/file_",suffix=".pdf";
var file1="pic/dynamic_",suffix1=".gif";
var file2="pic/static_",suffix2=".gif";

function initial_condition () 
{
	for(var i=0;i<48;i++)
	{		
		//初始文献
		if(i<24)
		{
			literature[i]=file.concat((i+1).toString(),suffix);
		}
		else
		{
			literature[i]=file.concat((i-23).toString(),suffix);		
		}
		//随机进度条,并没有这么多进度条
		if(i<16)
		{   
			if (i<8) {
				giflist[i]=file1.concat((i+1).toString(),suffix1);
			} else{
				giflist[i]=file2.concat((i-7).toString(),suffix2);
			}
			//alert(giflist[i]);
		}
	}
    for (var pa=24;pa<48;pa++) 
    {
	  abstract[pa]=abstract[pa-24];
    }
}

function condition_buffer () 
{
	//将初始化的元素随机，得到该被试的实验参数数据
	for(var t=1;t<=3;t++)
	{
		shuffle(giflist);
	    if (t==1) 
	    {
	    	for(var m=0;m<16;m++)
	        {
	    	    loading_symbol[m]=giflist[m];
	    	    time_length[m]=5;
	        }
	    } 
	    else if(t==2)
	    {
	    	for(var m=0;m<16;m++)
	        {
	    	    loading_symbol[m+16]=giflist[m];
	    	    time_length[m+16]=10;
	        }
	    }
	    else if(t==3)
	    {
	    	for(var m=0;m<16;m++)
	        {
	    	    loading_symbol[m+32]=giflist[m];
	    	    time_length[m+32]=15;
	        }
	    }
	}
	 
	shuffle(time_length);
	
}

function shuffle (array) {
	var m = array.length, t, i;

    // 处理余下待随机排序的元素…
    while (m) {

    // 取到一个带排序的元素…
    i = Math.floor(Math.random() * m--);

    // 把它和当前剩余元素序列的最后一个元素交换位置.
    t = array[m];
    array[m] = array[i];
    array[i] = t;
    }

    return array;
}
/*
 * 登陆页面跳转
 * 以及
 * 信息输入不完整提示
 */
function alertMsg(msg, mode) { //mode为空，即只有一个确认按钮，mode为1时有确认和取消两个按钮
        msg = msg || '';
        mode = mode || 0;
        var top = document.body.scrollTop || document.documentElement.scrollTop;
        var isIe = (document.all) ? true : false;
        var isIE6 = isIe && !window.XMLHttpRequest;
        var sTop = document.documentElement.scrollTop || document.body.scrollTop;
        var sLeft = document.documentElement.scrollLeft || document.body.scrollLeft;
        var winSize = function(){
            var xScroll, yScroll, windowWidth, windowHeight, pageWidth, pageHeight;
            // innerHeight获取的是可视窗口的高度
            if (window.innerHeight && window.scrollMaxY) {
                xScroll = document.body.scrollWidth;
                yScroll = window.innerHeight + window.scrollMaxY;
            } else if (document.body.scrollHeight > document.body.offsetHeight) { 
                xScroll = document.body.scrollWidth;
                yScroll = document.body.scrollHeight;
            } else { 
                xScroll = document.body.offsetWidth;
                yScroll = document.body.offsetHeight;
            }

            if (self.innerHeight) {    
                windowWidth = self.innerWidth;
                windowHeight = self.innerHeight;
            } else if (document.documentElement && document.documentElement.clientHeight) { 
                windowWidth = document.documentElement.clientWidth;
                windowHeight = document.documentElement.clientHeight;
            } else if (document.body) { // other Explorers
                windowWidth = document.body.clientWidth;
                windowHeight = document.body.clientHeight;
            }

            if (yScroll < windowHeight) {
                pageHeight = windowHeight;
            } else {
                pageHeight = yScroll;
            }

            if (xScroll < windowWidth) {
                pageWidth = windowWidth;
            } else {
                pageWidth = xScroll;
            }

            return{
                'pageWidth':pageWidth,
                'pageHeight':pageHeight,
                'windowWidth':windowWidth,
                'windowHeight':windowHeight
            }
        }();
        //alert(winSize.pageWidth);
        //遮罩层
        var styleStr = 'top:0;left:0;position:absolute;z-index:10000;background:#666;width:' + winSize.pageWidth + 'px;height:' +  (winSize.pageHeight + 30) + 'px;';
        styleStr += (isIe) ? "filter:alpha(opacity=80);" : "opacity:0.8;"; //遮罩层DIV
        var shadowDiv = document.createElement('div'); //添加阴影DIV
        shadowDiv.style.cssText = styleStr; //添加样式
        shadowDiv.id = "shadowDiv";
        if (isIE6) {
            var maskIframe = document.createElement('iframe');
            maskIframe.style.cssText = 'width:' + winSize.pageWidth + 'px;height:' + (winSize.pageHeight + 30) + 'px;position:absolute;visibility:inherit;z-index:-1;filter:alpha(opacity=0);';
            maskIframe.frameborder = 0;
            maskIframe.src = "about:blank";
            shadowDiv.appendChild(maskIframe);
        }
        document.body.insertBefore(shadowDiv, document.body.firstChild); //遮罩层加入文档
        //弹出框
        var styleStr1 = 'display:block;position:fixed;_position:absolute;left:' + (winSize.windowWidth / 2 - 200) + 'px;top:' + (winSize.windowHeight / 2 - 150) + 'px;_top:' + (winSize.windowHeight / 2 + top - 150)+ 'px;'; //弹出框的位置
        var alertBox = document.createElement('div');
        alertBox.id = 'alertMsg';
        alertBox.style.cssText = styleStr1;
        //创建弹出框里面的内容P标签
        var alertMsg_info = document.createElement('P');
        alertMsg_info.id = 'alertMsg_info';
        alertMsg_info.innerHTML = msg;
        alertBox.appendChild(alertMsg_info);
        //创建按钮
        var btn1 = document.createElement('a');
        btn1.id = 'alertMsg_btn1';
        btn1.href = 'javas' + 'cript:void(0)';
        btn1.innerHTML = '<cite>确定</cite>';
        btn1.onclick = function () {
            document.body.removeChild(alertBox);
            document.body.removeChild(shadowDiv);
            return true;
        };
        alertBox.appendChild(btn1);
        if (mode === 1) {
            var btn2 = document.createElement('a');
            btn2.id = 'alertMsg_btn2';
            btn2.href = 'javas' + 'cript:void(0)';
            btn2.innerHTML = '<cite>取消</cite>';
            btn2.onclick = function () {
                document.body.removeChild(alertBox);
                document.body.removeChild(shadowDiv);
                return false;
            };
            alertBox.appendChild(btn2);
        }
        document.body.appendChild(alertBox);

    }

function login_to_ins()
{
	if(document.getElementById("name").value.length!=0 && document.getElementById("age").value.length!=0 && document.getElementById("name").value!="请输入您的姓名拼音")
	{	
		document.getElementById("login").style.display="none";
	    document.getElementById("ins").style.display="block";
	    //保存个人信息
	    get_info();
	    //生成实验设计
	    initial_condition();
	    condition_buffer();
	}
	else
	{
		alertMsg("</br>您的个人信息输入不完整，请填写完整进入正式实验</br>");
	}
}

function ins_to_exp () 
{
	//仅用于测试
	loading_symbol[0]="pic/dynamic_3.gif";
	time_length[0]="10";
	
	document.getElementById("ins").style.display="none";
	document.body.style.backgroundColor="#9E9E9E";
	
	document.getElementById("exp").style.display="block";
	document.getElementById("Abstract").innerHTML=abstract[0];
	document.getElementById("search_engine").style.display="block";
	document.getElementById("gif").src=loading_symbol[0];
	append_to_tableheader();
	document.title="LoadingSymbol正式实验";
	
}

var exp_id=0;
var scale_like=new Array(48);
var copy_time=new Array(48);
var scale_time=new Array(48);
function button_check (divnumber) 
{
	if(divnumber==1)
	{
		//文献摘要界面，按键进入进度条
		document.getElementById("search_engine").style.display="none";
		document.getElementById("pdf").src=literature[exp_id];
		document.getElementById("btn3").disabled=true;
		document.getElementById("loading_symbol").style.display="block";
		document.getElementById("bar-area").style.display="block";
		progressbars(1);
		gifmove(1);
	}
	//divnumber=2，btn2  略，进度条结束后立即转至文献页面（预加载）
	else if(divnumber==3)
	{
		//文献内容页面，按键跳转至复制时间
		document.getElementById("literature").style.display="none";
		document.getElementById("exp").style.margin="160px auto";
		document.getElementById("copy_time").style.display="block";
		document.getElementById("btn4").disabled=true;
		kbcheck_time();
	}
	else if(divnumber==4)
	{
		//复制时间页面，按键跳转至时间感知页面
		document.getElementById("copy_time").style.display="none";
		document.getElementById("btn4").style.color="gray";
		document.getElementById("scale_time").style.display="block";
	    document.getElementById("btn5").disabled=true;
	    scale_check("time");
	}
	else if(divnumber==5)
	{
		//记录量表选择scale_time
		scale_time[exp_id]=$('input[name="time"]:checked').val();
		remove_radio("time");
		//时间感知页面，按键跳转至喜欢程度页面
		document.getElementById("scale_time").style.display="none";
		document.getElementById("scale_like").style.display="block";
		document.getElementById("btn6").disabled=true;
		scale_check("like");
	}
	else if(divnumber==6)
	{
		//记录量表选择scale_like
		scale_like[exp_id]=$('input[name="like"]:checked').val();
		remove_radio("like");
		//喜欢程度页面，按键跳转至下一个试次
		document.getElementById("scale_like").style.display="none";
		if(exp_id<48)
		{
			append_to_table();//将数据添加至表格
			if(exp_id==2)
			{
				//document.getElementById("data_table").style.display="block";
			    //data_output('csv');
			    //进入忍耐限度测量部分
			    document.getElementById("exp_to_waiting").style.display="block";
			    document.getElementById("exp").style.display="none";
			    document.getElementById("loading_symbol").style.left="0px";
			    document.getElementById("pbar").style.width="0%";
                //document.getElementById("p-label").style.width="0%";
			}
			else
			{
				document.getElementById("Abstract").innerHTML=abstract[exp_id+1];
				document.getElementById("search_engine").style.display="block";
			    document.getElementById("loading_symbol").style.left="0px";
			    document.getElementById("pbar").style.width="0%";
			    document.getElementById("gif").src=loading_symbol[exp_id+1];
                //document.getElementById("p-label").style.width="0%";
			}
		}
		exp_id=exp_id+1;
	}
	else if(divnumber==7)
	{
		document.getElementById("exp").style.display="block";
		//修改onclick事件函数
		document.getElementById("btn1").onclick=to_symbol;
		document.getElementById("btn3").onclick=literature_to_new;
		//修改btn3 文字提示部分
		document.getElementById("btn3").value="下一个";
		//跳转
		document.getElementById("exp_to_waiting").style.display="none";
		document.getElementById("search_engine").style.display="block";
		append_to_waitingTableheader();
		
		//仅用于测试
		giflist[0]="pic/static_1.gif";
	}
}

var gif_id=0;
var pageclose=0;
var copy_time1,copy_time2;
var time_max=new Array(16);
function to_symbol () {
    //btn1  摘要页面按钮事件函数
	document.getElementById("search_engine").style.display="none";
	document.getElementById("pdf").src=literature[gif_id];
	document.getElementById("gif").src=giflist[gif_id];
	document.getElementById("loading_symbol").style.display="block";
	document.getElementById("bar-area").style.display="block";
	document.getElementById("btn").style.display="block";
	gifmove(2);
	progressbars(2);
	pageclose=0;
	//copy_time1=Date.parse(new Date())/1000;
	copy_time1=(new Date()).valueOf();
}

function literature_to_new () {
	//btn3  文献页面按钮事件函数
	document.getElementById("literature").style.display="none";
	document.getElementById("exp").style.margin="160px auto";
	if(gif_id<3)
	{
		document.getElementById("Abstract").innerHTML=abstract[gif_id];
	    document.getElementById("search_engine").style.display="block";
	    document.getElementById("loading_symbol").style.left="0px";
	    document.getElementById("pbar").style.width="0%";
	}
	else
	{
		document.getElementById("thx").style.display="block";
		//waitingData_output('csv');
	}
}

function gifmove (part) 
{
    if (part==1) 
    {
        var testDiv = document.getElementById('loading_symbol');
	    var left = testDiv.style.left;
        var leftnum = Number(left.split('px')[0]);
        var num = 0;
        var animate = setInterval(function()
        {
           if(num>=100)//移动总距离;加载结束
           {
             clearInterval(animate);
           }
            leftnum += 3;//单次移动距离
            testDiv.style.left = leftnum+'px';
            num=num+0.5;
        },5*time_length[exp_id]);
    } 
    else if(part==2)
    {
    	var testDiv = document.getElementById('loading_symbol');
	    var left = testDiv.style.left;
        var leftnum = Number(left.split('px')[0]);
        var num = 0;
        var animate = setInterval(function()
        {
           if(num>=100 || pageclose==1)//移动总距离;加载结束
           {
              clearInterval(animate);
              //当被试真的坚持到最后，也要有所操作
              document.getElementById("literature").style.display="block";
              document.getElementById("loading_symbol").style.display="none";
              document.getElementById("exp").style.margin="80px auto";
              document.getElementById("btn").style.display="none";
              //copy_time2=Date.parse(new Date())/1000;
              copy_time2=(new Date()).valueOf();
              time_max[gif_id]=copy_time2-copy_time1;
              append_to_waitingTable();
	          gif_id++;
           }
            leftnum += 1/2;
            testDiv.style.left = leftnum+'px';
            num=num+1/12;
        },100);//max--2分钟

    }	 
    //每隔10ms移动一下单次距离,则一秒100px  
    //500固定*speed/1000=time_length----speed=time_length*2
}

function kbcheck_time () 
{
	var kbcheck_time1=1,kbcheck_time2=1;//只监测第一次
	var time1,time2;
	$(document).keydown(function(event) {
	   if(event.which==32)
	   {
	   	  if (kbcheck_time1==1) 
	   	  {
	   		 //time1=Date.parse(new Date())/1000;
	   		 time1=(new Date()).valueOf();
	   	  } 
	   	  kbcheck_time1++;
	   }
	})
	$(document).keyup(function(event) {
	    if(event.which==32)
	    {
	    	if (kbcheck_time2==1) {
	    		//time2=Date.parse(new Date())/1000;
	    		time2=(new Date()).valueOf();
	            copy_time[exp_id]=time2-time1;
	            document.getElementById("btn4").disabled=false;
	            document.getElementById("btn4").style.color="red";
	    	}
	    	kbcheck_time2++;
	    }
	})
}

function remove_radio (scale) {
	if (scale=="like") {
		var inputlist=document.getElementsByName("like");
	} else if(scale=="time"){
		var inputlist=document.getElementsByName("time");
	}
	for (var x=0;x<inputlist.length;x++) {
		inputlist[x].checked=false;
	}
}

function scale_check (scale) 
{
	if (scale=="like") 
	{
	    $(function() {
            $('input[name="like"]').click(function() {
                document.getElementById("btn6").disabled=false;
            });
        })
	}
	else if(scale=="time")
	{
		$(function() {
            $('input[name="time"]').click(function() {
                document.getElementById("btn5").disabled=false;
            });
        })
	}
	
}

function VirtualPage_close () 
{
	pageclose=1;
    document.getElementById("literature").style.display="block";
    document.getElementById("loading_symbol").style.display="none";
    document.getElementById("exp").style.margin="80px auto";
    document.getElementById("bar-area").style.display="none";
    document.getElementById("loading_symbol").style.left="0px";
    document.getElementById("pbar").style.width="0%";
    document.getElementById("btn").style.display="none";
}


function append_to_table () 
{
	var id=exp_id+1;
	$("#data_table").append("<tr><td>"+id+"</td><td>"+info[0]+"</td><td>"+info[1]+"</td><td>"+info[2]+"</td><td>"+time_length[exp_id]+"</td><td>"+loading_symbol[exp_id]+"</td><td>"+scale_like[exp_id]+"</td><td>"+copy_time[exp_id]+"</td><td>"+scale_time[exp_id]+"</td></tr>");
}
function append_to_tableheader () {
	$("#data_table").append("<tr><td>Id</td><td>Name</td><td>Age</td><td>Gender</td><td>Time_length</td><td>Loadingsymbol_id</td><td>Scale_like</td><td>Copy_time</td><td>Scale_time</td></tr>");
}

function data_output (type) 
{
	//输出excel---type格式
    var datafile_name;
    var ch="-";
    var condition_type="CopyTime";
    if(info[2]==1)
    {
    	datafile_name=info[0].concat(ch,info[1],ch,"男",ch,"scale",ch,condition_type);
    }
    else
    {
    	datafile_name=info[0].concat(ch,info[1],ch,"女",ch,"scale",ch,condition_type);
    }
	$("#data_table").tableExport(
	{
			filename: datafile_name,
		    format: type,
		    column_delimiter:',',
			cols:'1,2,3,4,5,6,7,8,9'
	});
	
}

function append_to_waitingTable () {
	$("#waiting_data_table").append("<tr><td>"+info[0]+"</td><td>"+info[1]+"</td><td>"+info[2]+"</td><td>"+giflist[gif_id]+"</td><td>"+time_max[gif_id]+"</td></tr>");
}

function append_to_waitingTableheader () {
	$("#waiting_data_table").append("<tr><td>Name</td><td>Age</td><td>Gender</td><td>Loadingsymbol_id</td><td>Time_Max</td></tr>");
}

function waitingData_output (type) {
	//输出excel---type格式
    var datafile_name;
    var ch="-";
    var condition_type="CopyTime";
    if(info[2]==1)
    {
    	datafile_name=info[0].concat(ch,info[1],ch,"男",ch,"limit",ch,condition_type);
    }
    else
    {
    	datafile_name=info[0].concat(ch,info[1],ch,"女",ch,"limit",ch,condition_type);
    }
	$("#waiting_data_table").tableExport(
	{
			filename: datafile_name,
		    format: type,
		    column_delimiter:',',
			cols:'1,2,3,4,5'
		}
	);
}

function progressbars (bartype) {
	var num = 0;
    var p1="%";
    if (bartype==1) {
    	var bar=setInterval(function  () {
    		document.getElementById("pbar").style.width=(num.toString()).concat(p1);
    		//$("#pbar").animate({width:(num.toString()).concat(p1)},0,"linear");
    		if(num==100)
    		{
    			document.getElementById("bar-area").style.display="none";
    			document.getElementById("loading_symbol").style.display="none";
    			document.getElementById("exp").style.margin="80px auto";
    			document.getElementById("literature").style.display="block";
                document.getElementById("btn3").disabled=false;
    			clearInterval(bar);
    		}
    		num=num+1;
    	},10*time_length[exp_id]);
    }
    else if(bartype==2)
    {
        var bar=setInterval(function () {
        	document.getElementById("pbar").style.width=(num.toString()).concat(p1);
        	//$("#pbar").animate({width:(num.toString()).concat(p1)},0,"linear");
    		if(num>=100 || pageclose==1)
    		{
    			document.getElementById("bar-area").style.display="none";
    			clearInterval(bar);
    		}
    		num=num+1/12;   
    	},100);//最长  10*t*120=100，t=1/12
    }
}

function sleep(numberMillis) { 
   var now = new Date(); 
   var exitTime = now.getTime() + numberMillis; 
   while (true) 
   {
      now = new Date(); 
      if (now.getTime() > exitTime) 
       return; 
   } 
}